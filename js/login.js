"use strict";var tit=document.querySelector(".tit"),form=document.querySelector("form"),nameInp=document.querySelector(".username"),pwdInp=document.querySelector(".pw"),errorSpan=document.querySelector("span"),insert=document.querySelector(".insert"),select=document.querySelector(".select"),popWindow=document.querySelector(".popWindow"),never=document.querySelector(".never"),mask=document.querySelector(".mask"),zcus=document.querySelector(".us"),ts=document.querySelector("#ts"),ts1=document.querySelector("#ts1"),ts2=document.querySelector("#ts2"),ts3=document.querySelector("#ts3"),ts4=document.querySelector("#ts4"),dui1=document.querySelector(".dui1"),dui2=document.querySelector(".dui2"),dui3=document.querySelector(".dui3"),dui4=document.querySelector(".dui4"),nick1=document.querySelector(".nick1"),pw1=document.querySelector(".pw1"),pw2=document.querySelector(".pw2"),dzg=document.querySelector(".dzg"),register=document.querySelector(".register");tit.addEventListener("click",function(){window.location.href="./index.html"}),register.addEventListener("click",function(){var e=[],t=zcus.value,n=pw1.value,l=pw2.value,s=nick1.value,o=window.getComputedStyle(ts).display,i=window.getComputedStyle(ts1).display,u=window.getComputedStyle(ts2).display,d=window.getComputedStyle(ts3).display,r=window.getComputedStyle(ts4).display;if(e.push(o),e.push(i),e.push(u),e.push(d),e.push(r),!(t&&n&&l&&s))return alert("您有东西没填哦~~~");if("block"===o||"block"===i||"block"===u||"block"===d||"block"===r)return alert("请按照规范修改表单");u=zcus.value,d=pw1.value,r=nick1.value;ajax({url:"../server/register.php",method:"POST",data:{username:u,password:d,nickname:r},success:function(e){alert("恭喜您，注册成功"),window.location.href="./login.html"},error:function(e){alert("服务器暂时出现问题了, 请联系管理员")}})}),select.addEventListener("click",function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=nameInp.value,e=pwdInp.value;t&&e?(errorSpan.style.display="none",ajax({url:"../server/04_login.php",method:"POST",data:{username:t,password:e},success:function(e){if(0!==e.code){setCookie("nickname",e.nickname,5e3),setCookie("username",e.username,5e3);var t=getCookie("url");window.location.href="./".concat(t||"index",".html")}else{if(confirm("用户名密码不对哦！需要注册吗亲~~~"))return mask.style.display="block",void(popWindow.style.opacity="0.5");t=confirm("就是想进去看看？？？");window.location.href=t?"./index.html":"./login.html"}},error:function(e){alert("服务器暂时出现问题了, 请联系管理员")}})):errorSpan.style.display="block"}),insert.addEventListener("click",function(e){mask.style.display="block",(e=e||window.event).preventDefault(),popWindow.style.opacity="0.5"}),never.addEventListener("click",function(){window.location.href="./login.html"}),zcus.addEventListener("blur",function(){var e=zcus.value;/^[a-z0-9]\w{4,11}$/i.test(e)?(ts1.style.display="none",ajax({url:"../server/username.php",method:"POST",data:{username:e},success:function(e){0===e.code?(dui1.style.display="inline-block",ts4.style.display="none"):(dui1.style.display="none",ts4.style.display="block"),ts1.style.display="none"}})):(dui1.style.display="none",ts1.style.display="block",ts4.style.display="none"),zcus.value||(ts1.style.display="none",ts4.style.display="none")}),nick1.addEventListener("input",function(){var e=nick1.value;/^[\u4e00-\u9fa5a-z0-9]{2,9}$/gm.test(e)?(ts3.style.display="none",dui4.style.display="inline-block"):(dui4.style.display="none",ts3.style.display="block"),nick1.value||(ts3.style.display="none")}),pw2.addEventListener("input",function(){var e=pw1.value,t=pw2.value;t?e===t?(ts2.style.display="none",dui3.style.display="inline-block"):(dui3.style.display="none",ts2.style.display="block"):ts2.style.display="none"}),pw1.addEventListener("input",function(){var e,t=pw1.value,n=pw2.value;/^[0-9a-z!@#\$\^&\*\.]{7,16}$/i.test(t)?(dui2.style.display="inline-block",ts.style.display="none",dzg.style.display="block",e=function(e){var t=0;/[0-9]+/.test(e)&&t++;/[a-zA-Z]+/.test(e)&&t++;/[!@#\$\^&\*\.]+/.test(e)&&t++;return t}(t),dzg.id="d"+e):(ts.style.display="block",dzg.style.display="none",dui2.style.display="none"),pw1.value||(ts.style.display="none"),n?t===n?(ts2.style.display="none",dui3.style.display="inline-block"):(ts2.style.display="block",dui3.style.display="none"):ts2.style.display="none"});