"use strict";function asyncGeneratorStep(n,e,a,o,t,i,l){try{var s=n[i](l),c=s.value}catch(n){return void a(n)}s.done?e(c):Promise.resolve(c).then(o,t)}function _asyncToGenerator(s){return function(){var n=this,l=arguments;return new Promise(function(e,a){var o=s.apply(n,l);function t(n){asyncGeneratorStep(o,e,a,t,i,"next",n)}function i(n){asyncGeneratorStep(o,e,a,t,i,"throw",n)}t(void 0)})}}var nickname=getCookie("nickname"),id=window.sessionStorage.getItem("id"),count=1,goods_info=null;function getGeneral(){return _getGeneral.apply(this,arguments)}function _getGeneral(){return(_getGeneral=_asyncToGenerator(regeneratorRuntime.mark(function n(){var e,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.get("../server/getGeneral.php",{list_id:id},null,"json");case 2:a=n.sent,e=a.list,a="",a+='<div class="first">\n                 <span class="name">'.concat((goods_info=e)[0].good_name,'</span>\n                <span class="evaluation"><a href="../demo/com.html">用户评价</a></span>\n            </div>\n            <div class="container">\n                <span>为方便您购买，请提前登录</span><a href="../demo/login.html">立即登录</a><span><a class="iconfont">&#xe667;</a></span>\n            </div>\n            <div class="main">\n                <div class="leftlist">\n                    <div class="box">\n                        <div class="show">\n                            <img src="').concat(e[0].good_img1,'" alt="">\n                        <div class="mask"></div>\n                        </div>\n                        <div class="list">\n                            <p class="active">\n                            <img src="').concat(e[0].good_img1,'" data-show="').concat(e[0].good_img1,'" data-enlarge="').concat(e[0].good_img1,'" alt="">\n                            </p>'),0!=e[0].good_img2&&(a+='<p>\n                    <img src="'.concat(e[0].good_img2,'" data-show="').concat(e[0].good_img2,'" data-enlarge="').concat(e[0].good_img2,'" alt="">\n                </p>')),0!=e[0].good_img3&&(a+='<p>\n                    <img src="'.concat(e[0].good_img3,'" data-show="').concat(e[0].good_img3,'" data-enlarge="').concat(e[0].good_img3,'" alt="">\n                </p>')),0!=e[0].good_img4&&(a+='<p>\n                    <img src="'.concat(e[0].good_img4,'" data-show="').concat(e[0].good_img4,'" data-enlarge="').concat(e[0].good_img4,'" alt="">\n                </p>')),0!=e[0].good_img5&&(a+='<p>\n                    <img src="'.concat(e[0].good_img5,'" data-show="').concat(e[0].good_img5,'" data-enlarge="').concat(e[0].good_img5,'" alt="">\n                </p>')),a+='</div>\n                <div class="enlarge" style="background-image:url('.concat(e[0].good_img1,')"></div>\n            </div>\n            </div>  \n            <div class="rightlist">\n            <h2>').concat(e[0].good_name,'</h2>\n            <span class="introduce">').concat(e[0].name,'</span>\n            <span class="piece">').concat(e[0].price,'</span>\n            <div class="border"></div>\n            <div class="address">\n                <span class="iconfont1">&#xe683;</span>\n                <span class="big">北京</span><span class="middle">北京市</span><span class="small">海淀区</span><span class="street">清河街道</span>\n                <input type="text" class="ad1" placeholder="省">\n                <input type="text" class="ad2" placeholder="市">\n                <input type="text" class="ad3" placeholder="区">\n                <input type="text" class="ad4" placeholder="详细地址">\n                <i class="update">修改</i>\n                <div class="remaining">有现货</div>\n            </div>\n            <div class="all">总价：').concat(e[0].price,'</div>\n            <div class="cart">\n                <span class="car1" data-name="').concat(e[0].good_name,'"> 加入购物车</span>\n                <span class="like">喜欢</span>\n            </div>\n            </div>\n            </div>'),$(".all").html(a),fn();case 14:case"end":return n.stop()}},n)}))).apply(this,arguments)}function fn(){var a=document.querySelector(".container"),n=document.querySelector(".car1"),t=document.querySelector(".update"),i=document.querySelector(".ad1"),l=document.querySelector(".ad2"),s=document.querySelector(".ad3"),c=document.querySelector(".ad4"),r=document.querySelector(".big"),d=document.querySelector(".middle"),g=document.querySelector(".small"),u=document.querySelector(".street");console.log(i),nickname?$(".container").css("display","none"):$(".container").css("display","block"),$(".container>a").on("click",function(){setCookie("url","GeneralDetails",30),window.location.href="./login.html"}),$(".iconfont").on("click",function(){$(".container").css("display","none")}),t.addEventListener("click",function(){return"修改"===t.innerHTML?(r.style.display="none",d.style.display="none",g.style.display="none",u.style.display="none",i.style.display="inline-block",l.style.display="inline-block",s.style.display="inline-block",c.style.display="inline-block",void(t.innerHTML="完成")):void("完成"===t.innerHTML&&(n=i.value,e=l.value,a=s.value,o=c.value,r.style.display="inline-block",d.style.display="inline-block",g.style.display="inline-block",u.style.display="inline-block",i.style.display="none",l.style.display="none",s.style.display="none",c.style.display="none",t.innerHTML="修改",(n||e||a||o)&&(n&&e&&a&&o&&/[\^u4e00-\u9fa5]{2,15}$/gm.test(n)&&/[\^u4e00-\u9fa5]{2,15}$/gm.test(e)&&/[\^u4e00-\u9fa5]{2,15}$/gm.test(a)&&/[\^u4e00-\u9fa5]{2,15}$/gm.test(o)?(r.innerHTML=n,d.innerHTML=e,g.innerHTML=a,u.innerHTML=o):(r.innerHTML="北京",d.innerHTML="北京市",g.innerHTML="海淀区",u.innerHTML="清河街道"),i.value=null,l.value=null,s.value=null,c.value=null)));var n,e,a,o}),n.addEventListener("click",function(){var n,e;"block"===window.getComputedStyle(a).display?confirm("要先登录才能购买哦~~")?(window.location.href="./login.html",setCookie("url","GeneralDetails",30)):window.location.href="./GeneralDetails.html":((e=(n=JSON.parse(window.localStorage.getItem(nickname))||[]).filter(function(n){return n.id==goods_info[0].id})).length?e[0].num+=count:(goods_info[0].num=count,n.push(goods_info[0])),window.localStorage.setItem(nickname,JSON.stringify(n)),alert("加入购物车成功"))}),$(".nav_wap>.nav>.right>.on").find("a").on("click",function(){setCookie("url","GeneralDetails",3e3),window.location.href="./login.html"}),new Enlarge(".box")}getGeneral();